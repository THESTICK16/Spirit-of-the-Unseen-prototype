[gd_scene load_steps=5 format=2]

[ext_resource path="res://Assets/Fonts/Inconsolata/static/Inconsolata/Inconsolata-Regular.ttf" type="DynamicFontData" id=1]

[sub_resource type="DynamicFont" id=1]
size = 50
outline_size = 3
outline_color = Color( 0.458824, 0.00392157, 0.00392157, 1 )
extra_spacing_char = 2
font_data = ExtResource( 1 )

[sub_resource type="StyleBoxEmpty" id=2]

[sub_resource type="GDScript" id=3]
script/source = "extends Button

## The input key that will be changed if this button is selected (i.e. \"ui_left\")
var key
## The value of the input that is mapped to the key
var value

## Emitted when the keybinding has changed
signal keybinding_changed(key, new_value)

## Whether the button is pressed and waiting for the player to enter its new value
var waiting_input := false

func _unhandled_input(event):
	if waiting_input:
		if event is InputEventKey:
			change_keybind_button(event.scancode)
#			value = event.scancode
#			text = OS.get_scancode_string(value)
#			pressed = false
#			waiting_input = false
		if event is InputEventMouseButton:
			text = OS.get_scancode_string(value)
			pressed = false
			waiting_input = false

func _toggled(button_pressed):
	if button_pressed:
		waiting_input = true
		set_text(\"Press Any Key\")
		
func change_keybind_button(new_value):
		value = new_value
		if value != null:
			text = OS.get_scancode_string(value)
		else:
			text = \"Unassigned\"
			
		emit_signal(\"keybinding_changed\", key, value)
		
		pressed = false
		waiting_input = false
"

[node name="KeybindButton" type="Button"]
anchor_right = 1.0
anchor_bottom = 1.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_colors/font_color_focus = Color( 0.85098, 0.839216, 0.0705882, 1 )
custom_colors/font_color = Color( 0.815686, 0.537255, 0.0470588, 1 )
custom_colors/font_color_hover = Color( 0.85098, 0.839216, 0.0705882, 1 )
custom_colors/font_color_pressed = Color( 1, 1, 1, 1 )
custom_fonts/font = SubResource( 1 )
custom_styles/focus = SubResource( 2 )
flat = true
script = SubResource( 3 )
__meta__ = {
"_edit_use_anchors_": false,
"_editor_description_": ""
}
